/* =================================================================
 * Tooltip Component - design-26-production-ready継承版
 * 
 * [概要]
 * design-26-production-ready.htmlの変態的品質レベルを完全継承。
 * ブロックチェーン情報等の補助説明表示コンポーネント。
 * 半透明背景とbackdrop-filterによる高品質表現。
 * 
 * [統一仕様]
 * - design-26の時計表示品質シャドウ技術を適用
 * - プレミアム半透明ダーク背景
 * - 高コントラスト白色テキスト
 * - ポジショニングとアニメーション対応
 * ================================================================= */

/* =================================================================
 * CSS VARIABLES - design-26から完全継承（統一性確保）
 * ================================================================= */
.tooltip {
  /* CSS変数をローカルで定義（グローバル変数との統一性確保） */
  --premium-dark-glass: rgba(40, 48, 61, 0.75); /* 半透明ダーク - 時刻表示 */
  --blur-medium: blur(16px);   /* 中程度ぼかし効果 */
  --transition-smooth: all 0.15s cubic-bezier(0.4, 0, 0.2, 1); /* スムーズトランジション */

  /* =================================================================
   * BASE TOOLTIP STYLES - design-26の時計表示品質を適用
   * ================================================================= */
  position: absolute;
  z-index: 9999;
  /* 半透明ダーク背景：時刻表示の高品質実装 - design-26から完全コピペ */
  background: var(--premium-dark-glass);
  backdrop-filter: var(--blur-medium);
  -webkit-backdrop-filter: var(--blur-medium);
  color: #f9fafb; /* 高コントラスト白色 */
  padding: 0.6rem 1rem;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.1); /* 微細な境界線 */
  font-family: 'IBM Plex Sans JP', sans-serif;
  font-size: 0.8rem;
  font-weight: 500;
  line-height: 1.4;
  max-width: 280px;
  word-wrap: break-word;
  pointer-events: none;
  user-select: none;
  
  /* ダーク質感のシャドウ設定：時計表示から完全コピペ */
  box-shadow: 
    inset 0 1px 1px rgba(255, 255, 255, 0.12),
    inset 0 -0.5px 1px rgba(0, 0, 0, 0.25),
    0 3px 6px rgba(0, 0, 0, 0.15);
  
  /* アニメーション */
  opacity: 0;
  transform: scale(0.9) translateY(4px);
  transition: opacity 0.15s ease, transform 0.15s ease;
}

/* =================================================================
 * VISIBILITY STATES
 * ================================================================= */
.visible {
  opacity: 1;
  transform: scale(1) translateY(0);
}

.hidden {
  opacity: 0;
  transform: scale(0.9) translateY(4px);
  pointer-events: none;
}

/* =================================================================
 * POSITION VARIANTS - 配置方向
 * ================================================================= */
.top {
  bottom: 100%;
  left: 50%;
  transform-origin: bottom center;
  margin-bottom: 8px;
}

.top::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -6px;
  border: 6px solid transparent;
  border-top-color: var(--premium-dark-glass);
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

.bottom {
  top: 100%;
  left: 50%;
  transform-origin: top center;
  margin-top: 8px;
}

.bottom::after {
  content: '';
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -6px;
  border: 6px solid transparent;
  border-bottom-color: var(--premium-dark-glass);
  filter: drop-shadow(0 -2px 4px rgba(0, 0, 0, 0.1));
}

.left {
  right: 100%;
  top: 50%;
  transform-origin: right center;
  margin-right: 8px;
}

.left::after {
  content: '';
  position: absolute;
  left: 100%;
  top: 50%;
  margin-top: -6px;
  border: 6px solid transparent;
  border-left-color: var(--premium-dark-glass);
  filter: drop-shadow(2px 0 4px rgba(0, 0, 0, 0.1));
}

.right {
  left: 100%;
  top: 50%;
  transform-origin: left center;
  margin-left: 8px;
}

.right::after {
  content: '';
  position: absolute;
  right: 100%;
  top: 50%;
  margin-top: -6px;
  border: 6px solid transparent;
  border-right-color: var(--premium-dark-glass);
  filter: drop-shadow(-2px 0 4px rgba(0, 0, 0, 0.1));
}

/* Positioning adjustments for arrows */
.top.visible,
.bottom.visible {
  transform: translateX(-50%) scale(1) translateY(0);
}

.left.visible,
.right.visible {
  transform: translateY(-50%) scale(1) translateX(0);
}

.top:not(.visible) {
  transform: translateX(-50%) scale(0.9) translateY(4px);
}

.bottom:not(.visible) {
  transform: translateX(-50%) scale(0.9) translateY(-4px);
}

.left:not(.visible) {
  transform: translateY(-50%) scale(0.9) translateX(4px);
}

.right:not(.visible) {
  transform: translateY(-50%) scale(0.9) translateX(-4px);
}

/* =================================================================
 * SIZE VARIANTS
 * ================================================================= */
.small {
  padding: 0.4rem 0.75rem;
  font-size: 0.75rem;
  border-radius: 8px;
  max-width: 200px;
}

.medium {
  padding: 0.6rem 1rem;
  font-size: 0.8rem;
  border-radius: 12px;
  max-width: 280px;
}

.large {
  padding: 0.8rem 1.25rem;
  font-size: 0.875rem;
  border-radius: 16px;
  max-width: 320px;
}

/* Arrow size adjustments for size variants */
.small::after {
  border-width: 4px;
  margin-left: -4px;
  margin-top: -4px;
}

.large::after {
  border-width: 8px;
  margin-left: -8px;
  margin-top: -8px;
}

/* =================================================================
 * TOOLTIP CONTAINER - ホバートリガー要素用
 * ================================================================= */
.container {
  position: relative;
  display: inline-block;
}

/* =================================================================
 * DELAY VARIANTS - 表示タイミング制御
 * ================================================================= */
.immediate {
  transition-delay: 0ms;
}

.short {
  transition-delay: 150ms;
}

.medium {
  transition-delay: 300ms;
}

.long {
  transition-delay: 600ms;
}

/* =================================================================
 * VARIANT STYLES - 用途別スタイル
 * ================================================================= */
.info {
  background: rgba(59, 130, 246, 0.9);
  border-color: rgba(59, 130, 246, 0.2);
}

.info::after {
  border-top-color: rgba(59, 130, 246, 0.9);
  border-bottom-color: rgba(59, 130, 246, 0.9);
  border-left-color: rgba(59, 130, 246, 0.9);
  border-right-color: rgba(59, 130, 246, 0.9);
}

.success {
  background: rgba(16, 185, 129, 0.9);
  border-color: rgba(16, 185, 129, 0.2);
}

.success::after {
  border-top-color: rgba(16, 185, 129, 0.9);
  border-bottom-color: rgba(16, 185, 129, 0.9);
  border-left-color: rgba(16, 185, 129, 0.9);
  border-right-color: rgba(16, 185, 129, 0.9);
}

.warning {
  background: rgba(245, 158, 11, 0.9);
  border-color: rgba(245, 158, 11, 0.2);
}

.warning::after {
  border-top-color: rgba(245, 158, 11, 0.9);
  border-bottom-color: rgba(245, 158, 11, 0.9);
  border-left-color: rgba(245, 158, 11, 0.9);
  border-right-color: rgba(245, 158, 11, 0.9);
}

.error {
  background: rgba(220, 38, 38, 0.9);
  border-color: rgba(220, 38, 38, 0.2);
}

.error::after {
  border-top-color: rgba(220, 38, 38, 0.9);
  border-bottom-color: rgba(220, 38, 38, 0.9);
  border-left-color: rgba(220, 38, 38, 0.9);
  border-right-color: rgba(220, 38, 38, 0.9);
}

/* =================================================================
 * RESPONSIVE OPTIMIZATIONS - モバイル最適化
 * ================================================================= */
@media (max-width: 480px) {
  .tooltip {
    max-width: 240px;
    font-size: 0.75rem;
    padding: 0.5rem 0.8rem;
  }
  
  .small {
    max-width: 180px;
    font-size: 0.7rem;
    padding: 0.3rem 0.6rem;
  }
  
  .large {
    max-width: 260px;
    font-size: 0.8rem;
    padding: 0.6rem 1rem;
  }
}

/* =================================================================
 * ACCESSIBILITY & PERFORMANCE - design-26から継承
 * ================================================================= */
@media (prefers-reduced-motion: reduce) {
  .tooltip {
    transition: opacity 0.01ms !important;
    transform: none !important;
  }
  
  .visible {
    transform: none;
  }
  
  .hidden {
    transform: none;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .tooltip {
    background: rgba(0, 0, 0, 0.95);
    border: 2px solid white;
  }
  
  .tooltip::after {
    border-width: 8px;
  }
}

/* =================================================================
 * INTERACTIVE STATES - クリック可能なtooltip用
 * ================================================================= */
.interactive {
  pointer-events: auto;
  cursor: pointer;
}

.interactive:hover {
  background: rgba(40, 48, 61, 0.85);
  transform: scale(1.02);
}

.interactive:active {
  transform: scale(0.98);
}